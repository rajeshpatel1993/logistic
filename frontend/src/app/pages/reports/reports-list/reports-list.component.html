<div class="Reports">

  <table id="my-table">
    <h1>company:- Rajesh</h1>
    <!-- ... -->
  </table>
  <nb-card>
    <nb-card-body>
      <div class="row no-gutters">
        <div class="col-xs-12 col-sm-12 ">
          <h5 class="pb-3"> Reports</h5>
        </div>
      </div>

      <nb-layout-column class="p-0">
        <nb-card class="p-0">
          <nb-card-body class="p-1">

            <nb-tabset (changeTab)="onChangeTab($event)">
              <nb-tab tabTitle="Vehicle" class="p-0">
                <div class="row no-gutters mt-4 mb-4">
                  <div class="col-12 text-right">
                    <button class="btn btn-outline-primary custom" (click)="exportToPdf()"> Export to PDF</button>
                    <button class="btn btn-outline-primary custom ml-2" (click)="exportToExcel()"> Export to CSV</button>
                  </div>
                </div>
                <form class="formbg-light mb-3">
                  <div class="form-row">
                    <div class="col-xs-12 col-sm-6 co-md-4 mt-2">
                      <div class="daterange">
                        <input type="text"
                        ngxDaterangepickerMd
                        [(ngModel)]="selected"
                        [showCustomRangeLabel]="true"
                        [alwaysShowCalendars]="true"
                        [ranges]="ranges"
                        [linkedCalendars]="true"
                        [isInvalidDate] = "isInvalidDate"
                        [showClearButton]="true"
                        (ngModelChange)="dateRangeChange($event)"
                        placeholder="Select date..." />
                      </div>
                    </div>
                    <div class="col-xs-12 col-sm-6 co-md-2 mt-2">
                      <div class="ng-autocomplete">
                        <ng-autocomplete [data]="vehicleTypes" [searchKeyword]="keyword" placeHolder="Enter vehicle code"
                          (selected)='selectEvent($event, "vehicletype")' (inputChanged)='onChangeSearch($event)'
                          (inputFocused)='onFocused($event)' historyIdentifier="vehicleTypes" [itemTemplate]="itemTemplate"
                          [notFoundTemplate]="notFoundTemplate">
                        </ng-autocomplete>
          
                        <ng-template #itemTemplate let-item>
                          <a [innerHTML]="item.name"></a>
                        </ng-template>
          
                        <ng-template #notFoundTemplate let-notFound>
                          <div [innerHTML]="notFound"></div>
                        </ng-template>
                      </div>
                    </div>
                    <div class="col-xs-12 col-sm-5 co-md-2 mt-2">
                      <div class="ng-autocomplete">
                        <ng-autocomplete [data]="vehicleDetails" [searchKeyword]="keyword" placeHolder="Enter reg no’s"
                          (selected)='selectEvent($event, "vehicledetails")' (inputChanged)='onChangeSearch($event)'
                          (inputFocused)='onFocused($event)' historyIdentifier="vehicleDetails" [itemTemplate]="itemTemplate1"
                          [notFoundTemplate]="notFoundTemplate1">
                        </ng-autocomplete>
          
                        <ng-template #itemTemplate1 let-item>
                          <a [innerHTML]="item.name"></a>
                        </ng-template>
          
                        <ng-template #notFoundTemplate1 let-notFound>
                          <div [innerHTML]="notFound"></div>
                        </ng-template>
                      </div>
          
                    </div>
                    <div class="col-xs-12 col-sm-5 co-md-2 mt-2">
                      <div class="ng-autocomplete">
                        <ng-autocomplete [data]="vehicleRegistrations" [searchKeyword]="keyword" placeHolder="Enter driver name "
                          (selected)='selectEvent($event, "vehiclereg")' (inputChanged)='onChangeSearch($event)'
                          (inputFocused)='onFocused($event)' historyIdentifier="vehicleRegistrations"
                          [itemTemplate]="itemTemplate2" [notFoundTemplate]="notFoundTemplate2">
                        </ng-autocomplete>
          
                        <ng-template #itemTemplate2 let-item>
                          <a [innerHTML]="item.name"></a>
                        </ng-template>
          
                        <ng-template #notFoundTemplate2 let-notFound>
                          <div [innerHTML]="notFound"></div>
                        </ng-template>
                      </div>
                    </div>
                    <div class="col-xs-12 col-sm-2 co-md-2 mt-2">
                      <button type="button" nbButton status="Filter" (click)="filterData()" class="btn btn-primary w-100"><i
                          class="fas fa-search"></i> Search</button>
                    </div>
                  </div>
                </form>
                <div class="table-responsive">
                  <table class="table table-hover" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger">
                    <thead>
                      <tr>
                        <th>Vehicle</th>
                        <th>Driver </th>
                        <th>Location</th>
                        <th>Vehicle Type </th>
                        <th>Status</th>
                        <th>Reg/Serial no's</th>
                        <th>Current issue date</th>
                        <th>Fuel consumption </th>
                        <th>Previous service date</th>
                        <th>Service due </th>
                        <th>Road tax due </th>
                        <th>Insurance due </th>
                        <th>Driver License due </th>
                        <th>Project Name</th>
                        <th>Overall expense </th>
                        <th>Recent expense </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let item of vehiclesList">
                        <td>
                          <ng-template #dialog let-data let-ref="dialogRef">
                            <nb-card class="popupImage">
                              <nb-card-body>
                                <img src="{{item.vehicleImage}}" alt=" ">
                                <button nbButton class="popupClose" (click)="ref.close()"><i
                                    class="fas fa-times-circle"></i></button>
                              </nb-card-body>

                            </nb-card>
                          </ng-template>
                          <div class="VehicleDetail">
                            <div class="VehicleDetail_image">
                              <img nbButton (click)="open(dialog)" src="{{item.vehicleImage}}" width="80">
                            </div>
                            <div class="VehicleDetail_name">
                              <h5>{{item.name}}</h5>
                            </div>
                          </div>
                        </td>
                        <td>

                          <div class="row no-gutters">
  
                            <div class="col-12" *ngIf="item.assignMentStatus == 0">
                                <p> Unassigned</p>
                            </div>
                          
                            <div class="col-12" *ngIf="item.assignMentStatus == 1">
                              <div class="VehicleDriver">
                                <div class="VehicleDriver_image">
                                  <img [src]="item.assign_data.employee.empImage" width="55"/>
                                  <p>{{item.assign_data.employee.firstName}}</p>
                                </div>
                              </div>
                                
                            </div>
                          </div>

                        </td>
                        <td>
                          {{item.workLocationArray[0].workLocation}}
                        </td>
                        <td>
                          {{item.vehicleTypesArray[0].vehicleType}}

                        </td>
                        <td>
                          <div class="vehicleStatus">
                            <ul>
                              <li class="text-info" *ngIf="item.vehicleStatusArray[0].vehicleStatus == 'Working'"><i
                                  class="fas fa-wrench"></i> {{item.vehicleStatusArray[0].vehicleStatus}}</li>
                              <li class="text-success" *ngIf="item.vehicleStatusArray[0].vehicleStatus == 'Active'"><i
                                  class="fas fa-check-circle"></i> Active</li>
                              <li class="text-warning" *ngIf="item.vehicleStatusArray[0].vehicleStatus == 'In-Service'"><img
                                  src="assets/images/repair.png" alt=""> In-Service</li>
                              <li class="text-success" *ngIf="item.vehicleStatusArray[0].vehicleStatus == 'Complaint'"><i
                                  class="fas fa-file-signature"></i> Complaint</li>
                              <li class="text-danger" *ngIf="item.vehicleStatusArray[0].vehicleStatus == 'Accident'"><i
                                  class="fas fa-car-crash"></i> Accident</li>
                              <li class="text-danger" *ngIf="item.vehicleStatusArray[0].vehicleStatus == 'Not-Working'"><i
                                  class="fas fa-times-circle"></i> Not Working</li>
                              <li class="text-success" *ngIf="item.vehicleStatusArray[0].vehicleStatus == 'In-Active'"><i
                                  class="fas fa-check-circle"></i> In Active</li>
                            </ul>
                          </div>
                        </td>
                        <td>
                          {{item.regNo}}
                        </td>
                        <td>Current issue date</td>
                        <td>.Fuel consumption </td>
                        <td>.Previous service date</td>
                        <td>Service due </td>
                        <td>
                          
                          <div [ngSwitch]="item.vehicle_typeId">

                            <div *ngSwitchCase="'1'">
                              {{getDateDifference(item.roadTaxValid)}}
                              <div class="workStatus">
        
                                <span class="success tooltipwrp" *ngIf="getProgressBarValu(item.roadTaxValid) <= 50">
                                  <div class="toolTip">
                                    <p>{{item.roadTaxValid | date}}</p>
                                  </div>
                                </span>
                                <span class="pendingy tooltipwrp"
                                  *ngIf="getProgressBarValu(item.roadTaxValid) > 50 && getProgressBarValu(item.roadTaxValid) <= 75">
                                  <div class="toolTip">
                                    <p>{{item.roadTaxValid | date}}</p>
                                  </div>
                                </span>
                                <span class="pending tooltipwrp"
                                  *ngIf="getProgressBarValu(item.roadTaxValid) > 75 && getProgressBarValu(item.roadTaxValid) < 90">
                                  <div class="toolTip">
                                    <p>{{item.roadTaxValid | date}}</p>
                                  </div>
                                </span>
                                <span class="danger tooltipwrp" *ngIf="getProgressBarValu(item.roadTaxValid) >= 90">
                                  <div class="toolTip">
                                    <p>{{item.roadTaxValid | date}}</p>
                                  </div>
                                </span>
        
                              </div>
                            </div>
                            <div *ngSwitchCase="'2'">
                              {{getDateDifference(item.roadTaxValid)}}
                              <div class="workStatus">
        
                                <span class="success tooltipwrp" *ngIf="getProgressBarValu(item.roadTaxValid) <= 50">
                                  <div class="toolTip">
                                    <p>{{item.roadTaxValid | date}}</p>
                                  </div>
                                </span>
                                <span class="pendingy tooltipwrp"
                                  *ngIf="getProgressBarValu(item.roadTaxValid) > 50 && getProgressBarValu(item.roadTaxValid) <= 75">
                                  <div class="toolTip">
                                    <p>{{item.roadTaxValid | date}}</p>
                                  </div>
                                </span>
                                <span class="pending tooltipwrp"
                                  *ngIf="getProgressBarValu(item.roadTaxValid) > 75 && getProgressBarValu(item.roadTaxValid) < 90">
                                  <div class="toolTip">
                                    <p>{{item.roadTaxValid | date}}</p>
                                  </div>
                                </span>
                                <span class="danger tooltipwrp" *ngIf="getProgressBarValu(item.roadTaxValid) >= 90">
                                  <div class="toolTip">
                                    <p>{{item.roadTaxValid | date}}</p>
                                  </div>
                                </span>
                              </div>
                            </div>
        
                            <div *ngSwitchCase="'3'">
                              <span>N.A.</span>
                            </div>
        
                            <div *ngSwitchCase="'4'">
                              <span>N.A.</span>
                            </div>
                          </div>
                        </td>
                        <td>
                          <div [ngSwitch]="item.vehicle_typeId">
                            <div *ngSwitchCase="'1'">
                              {{getDateDifference(item.insuranceValid)}}
                              <div class="workStatus">
                                <span class="success tooltipwrp" *ngIf="getProgressBarValu(item.insuranceValid) <= 50">
                                  <div class="toolTip">
                                    <p>{{item.insuranceValid | date}}</p>
                                  </div>
                                </span>
                                <span class="pendingy tooltipwrp"
                                  *ngIf="getProgressBarValu(item.insuranceValid) > 50 && getProgressBarValu(item.insuranceValid) < 75">
                                  <div class="toolTip">
                                    <p>{{item.insuranceValid | date}}</p>
                                  </div>
                                </span>
                                <span class="pending tooltipwrp"
                                  *ngIf="getProgressBarValu(item.insuranceValid) >= 75 && getProgressBarValu(item.insuranceValid) < 90">
                                  <div class="toolTip">
                                    <p>{{item.insuranceValid | date}}</p>
        
                                  </div>
                                </span>
                                <span class="danger tooltipwrp" *ngIf="getProgressBarValu(item.insuranceValid) >= 90">
                                  <div class="toolTip">
                                    <p>{{item.insuranceValid | date}}</p>
                                  </div>
                                </span>
                              </div>
                            </div>
                            <div *ngSwitchCase="'2'">
                              {{getDateDifference(item.insuranceValid)}}
                              <div class="workStatus">
                                <span class="success tooltipwrp" *ngIf="getProgressBarValu(item.insuranceValid) <= 50">
                                  <div class="toolTip">
                                    <p>{{item.insuranceValid | date}}</p>
                                  </div>
                                </span>
                                <span class="pendingy tooltipwrp"
                                  *ngIf="getProgressBarValu(item.insuranceValid) > 50 && getProgressBarValu(item.insuranceValid) < 75">
                                  <div class="toolTip">
                                    <p>{{item.insuranceValid | date}}</p>
                                  </div>
                                </span>
                                <span class="pending tooltipwrp"
                                  *ngIf="getProgressBarValu(item.insuranceValid) >= 75 && getProgressBarValu(item.insuranceValid) < 90">
                                  <div class="toolTip">
                                    <p>{{item.insuranceValid | date}}</p>
        
                                  </div>
                                </span>
                                <span class="danger tooltipwrp" *ngIf="getProgressBarValu(item.insuranceValid) >= 90">
                                  <div class="toolTip">
                                    <p>{{item.insuranceValid | date}}</p>
                                  </div>
                                </span>
                              </div>
                            </div>
        
                            <div *ngSwitchCase="'3'">
                              <span>N.A.</span>
                            </div>
        
                            <div *ngSwitchCase="'4'">
                              <span>N.A.</span>
                            </div>
        
                          </div>
                        </td>
                        <td>Driver License due </td>
                        <td>{{item.assign_data?.projects.projectName}}</td>
                        <td>{{item.total_expense[0]?.total}} </td>
                        <td>{{item.last_expense[0]?.expense_type.expenseType}} </td>
                      </tr>

                    </tbody>
                  </table>
                </div>
              </nb-tab>
              <nb-tab tabTitle="Assign Vehicle" class="p-1">
                <div class="table-responsive">


                  <div class="row no-gutters">
                    <div class="col-xs-12 col-sm-10 col-md-10 ">
                      <div class="input-group daterange">
                        <input type="text"
                        ngxDaterangepickerMd
                        [(ngModel)]="selected"
                        [showCustomRangeLabel]="true"
                        [alwaysShowCalendars]="true"
                        [ranges]="ranges"
                        [linkedCalendars]="true"
                        [isInvalidDate] = "isInvalidDate"
                        [showClearButton]="true"
                        (ngModelChange)="dateRangeChange($event)"
                        placeholder="Select date..." />
                      </div>
                      
                    </div>
              
                  </div>
            
                 
            
                  <form class="formbg-light">
                    <div class="form-row">
                      <div class="col-xs-12 col-sm-3">
                        <div class="ng-autocomplete">
                          <ng-autocomplete [data]="vehicleTypes" [searchKeyword]="keyword" placeHolder="Enter vehicle code"
                            (selected)='selectEvent($event, "vehicletype")' (inputChanged)='onChangeSearch($event)'
                            (inputFocused)='onFocused($event)' historyIdentifier="vehicleTypes" [itemTemplate]="itemTemplate"
                            [notFoundTemplate]="notFoundTemplate">
                          </ng-autocomplete>
            
                          <ng-template #itemTemplate let-item>
                            <a [innerHTML]="item.name"></a>
                          </ng-template>
            
                          <ng-template #notFoundTemplate let-notFound>
                            <div [innerHTML]="notFound"></div>
                          </ng-template>
                        </div>
                      </div>
                      <div class="col-xs-12 col-sm-3">
                        <div class="ng-autocomplete">
                          <ng-autocomplete [data]="vehicleDetails" [searchKeyword]="keyword" placeHolder="Enter reg no’s"
                            (selected)='selectEvent($event, "vehicledetails")' (inputChanged)='onChangeSearch($event)'
                            (inputFocused)='onFocused($event)' historyIdentifier="vehicleDetails" [itemTemplate]="itemTemplate1"
                            [notFoundTemplate]="notFoundTemplate1">
                          </ng-autocomplete>
            
                          <ng-template #itemTemplate1 let-item>
                            <a [innerHTML]="item.name"></a>
                          </ng-template>
            
                          <ng-template #notFoundTemplate1 let-notFound>
                            <div [innerHTML]="notFound"></div>
                          </ng-template>
                        </div>
            
                      </div>
                      <div class="col-xs-12 col-sm-3">
                        <div class="ng-autocomplete">
                          <ng-autocomplete [data]="vehicleRegistrations" [searchKeyword]="keyword" placeHolder="Enter driver name "
                            (selected)='selectEvent($event, "vehiclereg")' (inputChanged)='onChangeSearch($event)'
                            (inputFocused)='onFocused($event)' historyIdentifier="vehicleRegistrations"
                            [itemTemplate]="itemTemplate2" [notFoundTemplate]="notFoundTemplate2">
                          </ng-autocomplete>
            
                          <ng-template #itemTemplate2 let-item>
                            <a [innerHTML]="item.name"></a>
                          </ng-template>
            
                          <ng-template #notFoundTemplate2 let-notFound>
                            <div [innerHTML]="notFound"></div>
                          </ng-template>
                        </div>
                      </div>
                      <div class="col-xs-12 col-sm-3">
                        <button type="button" nbButton status="Filter" (click)="filterData()" class="btn btn-primary ml-2 mr-2"><i
                            class="fas fa-search"></i> Search</button>
                      </div>
                    </div>
                  </form>

                  <div class="col-xs-12 col-sm-2 col-md-2 text-right">

                    <button (click)="exportToPdfAssignVehicle()"> Export to PDF</button>
                    <button (click)="exportToExcelAssignVehicle()"> Export to CSV</button>

                  </div>

                  <table class="table table-hover" datatable [dtOptions]="dtOptions1" [dtTrigger]="dtTrigger1" class="row-border hover">
                    <thead>
                      <tr>
                        <th>Vehicle</th>
                        <th>Current Driver </th>
                        <th>Previous Driver </th>
                        
                        <th>Driver License No</th>
                        <th>Driver License Due </th>
                        <th>Location</th>
                        <th>Status</th>
                        <th>Assignment Start date</th>
                        <th>Assignment End date </th>
                        <th>Duration</th>
                        <th>Start meter </th>
                        <th>End meter</th>
                        <th>Distance in Kms </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let item of assignedVehicles">
                      <td>
                          <ng-template #dialog let-data let-ref="dialogRef">
                            <nb-card class="popupImage">
                              <nb-card-body>
                                <img src="{{item.vehicle.vehicleImage}}" alt=" ">
                                <button nbButton class="popupClose" (click)="ref.close()"><i
                                    class="fas fa-times-circle"></i></button>
                              </nb-card-body>

                            </nb-card>
                          </ng-template>
                          <div class="VehicleDetail">
                            <div class="VehicleDetail_image">
                              <img nbButton (click)="open(dialog)" src="{{item.vehicle.vehicleImage}}" width="80">
                            </div>
                            <div class="VehicleDetail_name">
                              <h5>{{item.vehicle.name}}</h5>
                            </div>
                          </div>
                        </td>
                        <td>

                          <ng-template #dialogdriver let-data let-refd="dialogRefd">
                            <nb-card class="popupImage">
                              <nb-card-body>
                                <img src="{{item.employee.empImage}}" alt=" ">
                                <button nbButton class="popupClose" (click)="refd.close()"><i
                                    class="fas fa-times-circle"></i></button>
                              </nb-card-body>

                            </nb-card>
                          </ng-template>
                          <div class="VehicleDetail">
                            <div class="VehicleDetail_image">
                              <img nbButton (click)="open(dialogdriver)" src="{{item.employee.empImage}}" width="80">
                            </div>
                            <div class="VehicleDetail_name">
                              <h5>{{item.employee.firstName}}</h5>
                            </div>
                          </div>


                         
                        </td>
                        <td>
                          
                          <div *ngIf="item.previousDriver">
                            <ng-template #dialogdriver let-data let-refd="dialogRefd">
                              <nb-card class="popupImage">
                                <nb-card-body>
                                  <img src="{{item.previousDriver.employee.empImage}}" alt=" ">
                                  <button nbButton class="popupClose" (click)="refd.close()"><i
                                      class="fas fa-times-circle"></i></button>
                                </nb-card-body>

                              </nb-card>
                            </ng-template>
                            <div class="VehicleDetail">
                              <div class="VehicleDetail_image">
                                <img nbButton (click)="open(dialogdriver)" src="{{item.previousDriver.employee.empImage}}" width="80">
                              </div>
                              <div class="VehicleDetail_name">
                                <h5>{{item.previousDriver.employee.firstName}}</h5>
                              </div>
                            </div>
                           </div>
                           <div *ngIf="!item.previousDriver">
                              N.A.

                           </div>
                        </td>
                        <td>
                           N.A.
                        </td>
                        <td>
                          {{ item.driving_license_valid | date }}
                        </td>
                        <td>
                          {{item.workLocations.workLocation}}
                        </td>
                        <td>
                          N.A.
                        </td>
                        <td>
                          {{item.assignmentStartDate | date}}  
                        </td>
                        <td>{{ item.assignmentEndDate | date }}</td>
                        <td>duration </td>
                        <td>N.A. </td>
                        <td>N.A. </td>
                        <td>N.A. </td>
                      </tr>

                    </tbody>
                  </table>
                </div>
          
              </nb-tab>
              <nb-tab tabTitle="Service Management" class="p-1">
                <div *ngIf="serviceCalled">
                  <ngx-bar-chart>

                  </ngx-bar-chart>

                  <ngx-servicetaskbyamount></ngx-servicetaskbyamount>
                </div>
                <div class="table-responsive">


                  <div class="row no-gutters">
                    <div class="col-xs-12 col-sm-10 col-md-10 ">
                      <div class="input-group daterange">
                        <input type="text"
                        ngxDaterangepickerMd
                        [(ngModel)]="selected"
                        [showCustomRangeLabel]="true"
                        [alwaysShowCalendars]="true"
                        [ranges]="ranges"
                        [linkedCalendars]="true"
                        [isInvalidDate] = "isInvalidDate"
                        [showClearButton]="true"
                        (ngModelChange)="dateRangeChange($event)"
                        placeholder="Select date..." />
                      </div>
                      
                    </div>
              
                  </div>
            
                 
            
                  <form class="formbg-light">
                    <div class="form-row">
                      <div class="col-xs-12 col-sm-3">
                        <div class="ng-autocomplete">
                          <ng-autocomplete [data]="vehicleTypes" [searchKeyword]="keyword" placeHolder="Enter vehicle code"
                            (selected)='selectEvent($event, "vehicletype")' (inputChanged)='onChangeSearch($event)'
                            (inputFocused)='onFocused($event)' historyIdentifier="vehicleTypes" [itemTemplate]="itemTemplate"
                            [notFoundTemplate]="notFoundTemplate">
                          </ng-autocomplete>
            
                          <ng-template #itemTemplate let-item>
                            <a [innerHTML]="item.name"></a>
                          </ng-template>
            
                          <ng-template #notFoundTemplate let-notFound>
                            <div [innerHTML]="notFound"></div>
                          </ng-template>
                        </div>
                      </div>
                      <div class="col-xs-12 col-sm-3">
                        <div class="ng-autocomplete">
                          <ng-autocomplete [data]="vehicleDetails" [searchKeyword]="keyword" placeHolder="Enter reg no’s"
                            (selected)='selectEvent($event, "vehicledetails")' (inputChanged)='onChangeSearch($event)'
                            (inputFocused)='onFocused($event)' historyIdentifier="vehicleDetails" [itemTemplate]="itemTemplate1"
                            [notFoundTemplate]="notFoundTemplate1">
                          </ng-autocomplete>
            
                          <ng-template #itemTemplate1 let-item>
                            <a [innerHTML]="item.name"></a>
                          </ng-template>
            
                          <ng-template #notFoundTemplate1 let-notFound>
                            <div [innerHTML]="notFound"></div>
                          </ng-template>
                        </div>
            
                      </div>
                      <div class="col-xs-12 col-sm-3">
                        <div class="ng-autocomplete">
                          <ng-autocomplete [data]="vehicleRegistrations" [searchKeyword]="keyword" placeHolder="Enter driver name "
                            (selected)='selectEvent($event, "vehiclereg")' (inputChanged)='onChangeSearch($event)'
                            (inputFocused)='onFocused($event)' historyIdentifier="vehicleRegistrations"
                            [itemTemplate]="itemTemplate2" [notFoundTemplate]="notFoundTemplate2">
                          </ng-autocomplete>
            
                          <ng-template #itemTemplate2 let-item>
                            <a [innerHTML]="item.name"></a>
                          </ng-template>
            
                          <ng-template #notFoundTemplate2 let-notFound>
                            <div [innerHTML]="notFound"></div>
                          </ng-template>
                        </div>
                      </div>
                      <div class="col-xs-12 col-sm-3">
                        <button type="button" nbButton status="Filter" (click)="filterData()" class="btn btn-primary ml-2 mr-2"><i
                            class="fas fa-search"></i> Search</button>
                      </div>
                    </div>
                  </form>

                  <div class="col-xs-12 col-sm-2 col-md-2 text-right">

                    <button (click)="exportToPdfService()"> Export to PDF</button>
                    <button (click)="exportToExcelService()"> Export to CSV</button>

                  </div>

                  <table class="table table-hover" datatable [dtOptions]="dtOptions2" [dtTrigger]="dtTrigger2" class="row-border hover">
                    <thead>
                      <tr>
                        <th>Vehicle</th>
                        <th> Driver </th>
                        <th>Location</th>
                        <th>Status</th>
                        <th>Service Type</th>
                        <th>Service Interval</th>
                        <th>Last Performed Date</th>
                        <th>Last Performed Meter </th>
                        <th>Last Service Cost</th>
                        <th>Last Service Status </th>
                        <th>Next Due </th>
                        <th>Next Due </th>
                        <th> Subscribers</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let item of serviceReportData">
                      <td>
                          <ng-template #dialog let-data let-ref="dialogRef">
                            <nb-card class="popupImage">
                              <nb-card-body>
                                <img src="{{item.vehicle.vehicleImage}}" alt=" ">
                                <button nbButton class="popupClose" (click)="ref.close()"><i
                                    class="fas fa-times-circle"></i></button>
                              </nb-card-body>

                            </nb-card>
                          </ng-template>
                          <div class="VehicleDetail">
                            <div class="VehicleDetail_image">
                              <img nbButton (click)="open(dialog)" src="{{item.vehicle.vehicleImage}}" width="80">
                            </div>
                            <div class="VehicleDetail_name">
                              <h5>{{item.vehicle.name}}</h5>
                              <h6>{{item.vehicle.vehicle_code}}</h6>
                            </div>
                          </div>
                      </td>
                      <td>

                          <ng-template #dialogdriver let-data let-refd="dialogRefd">
                            <nb-card class="popupImage">
                              <nb-card-body>
                                <img src="{{item.employee.empImage}}" alt=" ">
                                <button nbButton class="popupClose" (click)="refd.close()"><i
                                    class="fas fa-times-circle"></i></button>
                              </nb-card-body>

                            </nb-card>
                          </ng-template>
                          <div class="VehicleDetail">
                            <div class="VehicleDetail_image">
                              <img nbButton (click)="open(dialogdriver)" src="{{item.employee.empImage}}" width="80">
                            </div>
                            <div class="VehicleDetail_name">
                              <h5>{{item.employee.firstName}}</h5>
                            </div>
                          </div>
                      </td>
                      <td>
                           N.A.
                      </td>
                      <td>
                        N.A.
                      </td>

                        <td>
                          {{item.serviceType.serviceTaskName}}
                        </td>
                        <td>
                          N.A.
                        </td>
                        <td>
                          {{item.previousService[0].createdAt | date}}
                        </td>
                        <td>
                          {{item.previousService[0].odometer}}
                        </td>
                        <td>
                          {{item.previousService[0].amount}}
                        </td>
                        <td>
                          N.A.
                        </td>
                        <td>N.A. </td>
                        <td>N.A. </td>
                        <td>N.A. </td>
                      </tr>

                    </tbody>
                  </table>
                </div>





                
              </nb-tab>
              <nb-tab tabTitle="Expense" class="p-1">
                <div class="table-responsive">
                  <table class="table table-hover">
                    <thead>
                      <tr>
                        <th>Vehicle</th>
                        <th>Date </th>
                        <th>Details</th>
                        <th>Vendor </th>
                        <th>Amount</th>
                      </tr>
                    </thead>
                    <tbody>
                      

                    </tbody>
                  </table>
                </div>
                <div class="card-footer pb-0 pt-3 pb-3">
                  <ul *ngIf="pager['pages'] && pager['pages'].length" class="pagination justify-content-center">
                    <li [ngClass]="{disabled:pager.currentPage === 1}" class="page-item first-item">
                      <a [routerLink]="['/pages/vehicles/assign-vehicles']" [queryParams]="{page: 1}"
                        class="page-link"><i class="fas fa-angle-double-left"></i></a>
                    </li>
                    <li [ngClass]="{disabled:pager.currentPage === 1}" class="page-item previous-item">
                      <a [routerLink]="['/pages/vehicles/assign-vehicles']"
                        [queryParams]="{ page: pager.currentPage - 1 }" class="page-link"><i
                          class="fas fa-angle-left"></i></a>
                    </li>
                    <li *ngFor="let page of pager.pages" [ngClass]="{active:pager.currentPage === page}"
                      class="page-item number-item">
                      <a [routerLink]="['/pages/vehicles/assign-vehicles']" [queryParams]="{ page: page }"
                        class="page-link">{{page}}</a>
                    </li>
                    <li [ngClass]="{disabled:pager.currentPage === pager.totalPages}" class="page-item next-item">
                      <a [routerLink]="['/pages/vehicles/assign-vehicles']"
                        [queryParams]="{ page: pager.currentPage + 1 }" class="page-link"><i
                          class="fas fa-angle-right"></i></a>
                    </li>
                    <li [ngClass]="{disabled:pager.currentPage === pager.totalPages}" class="page-item last-item">
                      <a [routerLink]="['/pages/vehicles/assign-vehicles']" [queryParams]="{ page: pager.totalPages }"
                        class="page-link"><i class="fas fa-angle-double-right"></i></a>
                    </li>
                    <li>
                      <nb-select placeholder="Select Showcase" [(selected)]="selectedPage">
                        <nb-option value="" disabled>10</nb-option>
                        <nb-option value="0">50</nb-option>
                        <nb-option value="1">100</nb-option>
                      </nb-select>
                    </li>
                  </ul>

                </div>
              </nb-tab>
              <nb-tab tabTitle="Vehicle Expiration Remainder " class="p-1" disabled>
                <p>List of <strong>transactions</strong>.</p>
              </nb-tab>
              <nb-tab tabTitle="Service Remainder " class="p-1" disabled>
                <p>List of <strong>transactions</strong>.</p>
              </nb-tab>
              <nb-tab tabTitle="Fuel management" class="p-1" disabled>
                <p>List of <strong>transactions</strong>.</p>
              </nb-tab>
              <nb-tab tabTitle="Complaint/Issue" class="p-1" disabled>
                <p>List of <strong>transactions</strong>.</p>
              </nb-tab>
              <nb-tab tabTitle="Contact details " class="p-1" disabled>
                <p>List of <strong>transactions</strong>.</p>
              </nb-tab>
            </nb-tabset>

          </nb-card-body>
        </nb-card>


      </nb-layout-column>
    </nb-card-body>
  </nb-card>
</div>